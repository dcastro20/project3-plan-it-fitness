(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=u,t.useAmp=function(){return u(a.default.useContext(o.AmpStateContext))};var r,a=(r=n("q1tI"))&&r.__esModule?r:{default:r},o=n("lwAK");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,r=e.hybrid,a=void 0!==r&&r,o=e.hasQuery;return n||a&&(void 0!==o&&o)}},"8Kt/":function(e,t,n){"use strict";t.__esModule=!0,t.defaultHead=c,t.default=void 0;var r=s(n("q1tI")),a=s(n("Xuae")),o=n("lwAK"),u=n("FYa8"),i=n("/0+H");function s(e){return e&&e.__esModule?e:{default:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[r.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(r.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function l(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===r.default.Fragment?e.concat(r.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var f=["name","httpEquiv","charSet","itemProp"];function d(e,t){return e.reduce((function(e,t){var n=r.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(l,[]).reverse().concat(c(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,r={};return function(a){var o=!0;if(a.key&&"number"!==typeof a.key&&a.key.indexOf("$")>0){var u=a.key.slice(a.key.indexOf("$")+1);e.has(u)?o=!1:e.add(u)}switch(a.type){case"title":case"base":t.has(a.type)?o=!1:t.add(a.type);break;case"meta":for(var i=0,s=f.length;i<s;i++){var c=f[i];if(a.props.hasOwnProperty(c))if("charSet"===c)n.has(c)?o=!1:n.add(c);else{var l=a.props[c],d=r[c]||new Set;d.has(l)?o=!1:(d.add(l),r[c]=d)}}}return o}}()).reverse().map((function(e,t){var n=e.key||t;return r.default.cloneElement(e,{key:n})}))}var p=(0,a.default)();function m(e){var t=e.children;return(r.default.createElement(o.AmpStateContext.Consumer,null,(function(e){return r.default.createElement(u.HeadManagerContext.Consumer,null,(function(n){return r.default.createElement(p,{reduceComponentsToState:d,handleStateChange:n,inAmpMode:(0,i.isInAmpMode)(e)},t)}))})))}m.rewind=p.rewind;var v=m;t.default=v},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},EbDI:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},FYa8:function(e,t,n){"use strict";var r;t.__esModule=!0,t.HeadManagerContext=void 0;var a=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext(null);t.HeadManagerContext=a},"HaE+":function(e,t,n){"use strict";function r(e,t,n,r,a,o,u){try{var i=e[o](u),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var u=e.apply(t,n);function i(e){r(u,a,o,i,s,"next",e)}function s(e){r(u,a,o,i,s,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return a}))},Ijbi:function(e,t,n){var r=n("WkPL");e.exports=function(e){if(Array.isArray(e))return r(e)}},RIqP:function(e,t,n){var r=n("Ijbi"),a=n("EbDI"),o=n("ZhPi"),u=n("Bnag");e.exports=function(e){return r(e)||a(e)||o(e)||u()}},SqjL:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n("HaE+"),i=n("ODXe"),s=n("q1tI"),c=n.n(s),l=n("8Kt/"),f=n.n(l),d=n("ko8p"),p=c.a.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){var e=Object(d.a)(),t=Object(i.a)(e,2),n=t[0],r=t[1].mutate,o=Object(s.useState)(!1),l=o[0],m=o[1],h=Object(s.useRef)(),b=Object(s.useRef)(),y=Object(s.useRef)(),w=Object(s.useState)({message:"",isError:!1}),g=w[0],x=w[1];Object(s.useEffect)((function(){h.current.value=n.name,b.current.value=n.bio}),[n]);var P=function(){var e=Object(u.a)(a.a.mark((function e(t){var o,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l){e.next=3;break}return e.abrupt("return");case 3:return m(!0),o=new FormData,y.current.files[0]&&o.append("profilePicture",y.current.files[0]),o.append("name",h.current.value),o.append("bio",b.current.value),e.next=10,fetch("/api/user",{method:"PATCH",body:o});case 10:if(200!==(u=e.sent).status){e.next=19;break}return e.next=14,u.json();case 14:i=e.sent,r({user:v(v({},n),i.user)}),x({message:"Profile updated"}),e.next=25;break;case 19:return e.t0=x,e.next=22,u.text();case 22:e.t1=e.sent,e.t2={message:e.t1,isError:!0},(0,e.t0)(e.t2);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={oldPassword:t.currentTarget.oldPassword.value,newPassword:t.currentTarget.newPassword.value},t.currentTarget.oldPassword.value="",t.currentTarget.newPassword.value="",e.next=6,fetch("/api/user/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:if(200!==(r=e.sent).status){e.next=11;break}x({message:"Password updated"}),e.next=17;break;case 11:return e.t0=x,e.next=14,r.text();case 14:e.t1=e.sent,e.t2={message:e.t1,isError:!0},(0,e.t0)(e.t2);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function S(){return(S=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/email/verify",{method:"POST"});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return p(c.a.Fragment,null,p(f.a,null,p("title",null,"Settings")),p("section",null,p("h2",null,"Edit Profile"),g.message?p("p",{style:{color:g.isError?"red":"#0070f3",textAlign:"center"}},g.message):null,p("form",{onSubmit:P},n.emailVerified?null:p("p",null,"Your email has not been verify."," ",p("a",{role:"button",onClick:function(){return S.apply(this,arguments)}},"Send verification email")),p("label",{htmlFor:"name"},"Name",p("input",{required:!0,id:"name",name:"name",type:"text",placeholder:"Your name",ref:h})),p("label",{htmlFor:"bio"},"Bio",p("textarea",{id:"bio",name:"bio",type:"text",placeholder:"Bio",ref:b})),p("label",{htmlFor:"avatar"},"Profile picture",p("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg",ref:y})),p("button",{disabled:l,type:"submit"},"Save")),p("form",{onSubmit:O},p("label",{htmlFor:"oldpassword"},"Old Password",p("input",{type:"password",name:"oldPassword",id:"oldpassword",required:!0})),p("label",{htmlFor:"newpassword"},"New Password",p("input",{type:"password",name:"newPassword",id:"newpassword",required:!0})),p("button",{type:"submit"},"Change Password"))))};t.default=function(){var e=Object(d.a)();return Object(i.a)(e,1)[0]?p(c.a.Fragment,null,p("h1",null,"Settings"),p(h,null)):p(c.a.Fragment,null,p("p",null,"Please sign in"))}},Xuae:function(e,t,n){"use strict";var r=n("lwsE"),a=n("PJYZ"),o=n("W8MJ"),u=n("7W2i"),i=n("a1gu"),s=n("Nsbk"),c=n("RIqP");function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return i(this,n)}}t.__esModule=!0,t.default=void 0;var f=n("q1tI"),d=!1;t.default=function(){var e,t=new Set;function n(n){e=n.props.reduceComponentsToState(c(t),n.props),n.props.handleStateChange&&n.props.handleStateChange(e)}return(function(i){u(c,i);var s=l(c);function c(e){var o;return r(this,c),o=s.call(this,e),d&&(t.add(a(o)),n(a(o))),o}return o(c,null,[{key:"rewind",value:function(){var n=e;return e=void 0,t.clear(),n}}]),o(c,[{key:"componentDidMount",value:function(){t.add(this),n(this)}},{key:"componentDidUpdate",value:function(){n(this)}},{key:"componentWillUnmount",value:function(){t.delete(this),n(this)}},{key:"render",value:function(){return null}}]),c}(f.Component))}},lwAK:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;var a=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=a},xxqU:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return n("SqjL")}])}},[["xxqU",0,1,2,4]]]);